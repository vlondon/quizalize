doctype html
html(ng-app='quizApp')
    head
        if quiz && quiz.meta.name
            title #{quiz.meta.name} by Quizalize
        else
            title Quizalize
            
        meta(name='viewport', content='width=device-width, initial-scale=1.0, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0')
        meta(name='description', content='')
        meta(charset='UTF-8')
        meta(http-equiv="X-UA-Compatible", content="IE=edge")
        meta(name="twitter:card" content="summary_large_image")
        meta(name="twitter:site" content="@quizalizeapp")
        meta(name="twitter:creator" content="@quizalizeapp")
        if quiz && quiz.meta.name
            meta(property='og:title' content='#{quiz.meta.name}')
        else
            meta(property='og:title' content='Quizalize - Spot student learning gaps instantly')
        meta(property='og:site_name' content='Quizalize')
        if quiz && quiz.uuid
           meta(property="og:url" content="http://www.quizalize.com/app?uuid=#{quiz.uuid}#/play/public/#{quiz.uuid}")
        if quiz && quiz.meta && quiz.meta.description
            meta(property='og:description' content='#{quiz.meta.description}')
        else
            meta(property="og:description" content="Quizalize lets you engage your class and deliver instant assessments for personalised learning on any computer, tablet or smartphone. It helps you quickly identify the strengths, weaknesses and learning gaps of individual students and intervene in real-time to give one-on-one help in the classroom.")
        //description will break in refactor
        meta(property='og:type' content='article')
        if quiz && quiz.meta && quiz.meta.imageUrl
            meta(property='og:image' content="#{quiz.meta.imageUrl}")
        else
            meta(property="og:image" content="http://www.quizalize.com/cquiz/img/Quizalize-meta.png")
        //imageUrl will break in refactor
        meta(name="apple-mobile-web-app-capable" content="yes")
        link(rel='apple-touch-icon', sizes='72x72', href='/img/icons/touch-icon-ipad-precomposed.png')
        link(rel='apple-touch-icon', sizes='114x114', href='/img/icons/touch-icon-iphone-retina-precomposed.png')
        link(rel='apple-touch-icon', sizes='144x144', href='/img/icons/touch-icon-ipad-retina-precomposed.png')
        script(type="text/javascript" src="http://cloudfront.loggly.com/js/loggly.tracker-2.1.min.js" async)
        script.
            var _LTracker = _LTracker || [];
            _LTracker.push({'logglyKey': '6c08c80e-28b7-4bdb-aeb5-809c1a797603',
            'sendConsoleErrors' : true,
            'tag' : 'loggly-jslogger'});
        link(rel='icon', sizes='192x192', href='/img/icons/ic_launcher.png')
        link(rel='stylesheet', href='/outdatedbrowser/outdatedbrowser.min.css')
        link(href='/cquiz/font-awesome/css/font-awesome.min.css', rel='stylesheet')
        meta(name='apple-mobile-web-app-status-bar-style', content='black')

        script.
            var intercomId = '!{intercomId}';            
            var intercomSettings = {
                app_id: intercomId
            }
            window.intercomSettings = intercomSettings;
            window.intercomId = intercomId;
            (function(){var w=window;var ic=w.Intercom;if(typeof ic==="function"){ic('reattach_activator');ic('update',intercomSettings);}else{var d=document;var i=function(){i.c(arguments)};i.q=[];i.c=function(args){i.q.push(args)};w.Intercom=i;function l(){var s=d.createElement('script');s.type='text/javascript';s.async=true;s.src='https://widget.intercom.io/widget/!{intercomId}';var x=d.getElementsByTagName('script')[0];x.parentNode.insertBefore(s,x);}if(w.attachEvent){w.attachEvent('onload',l);}else{w.addEventListener('load',l,false);}}})()


        if quiz && quiz.meta.featured
            script.
                var domain = document.referrer ? document.referrer.split('/')[2] : undefined;
                ga('send', 'event', 'quiz-of-the-day', '#{quiz.meta.name}', domain);

        if (devServer=='true')
            //- script(src="http://localhost:7071/webpack-dev-server.js")
        else 
            link(href='/js/quizApp.css', rel='stylesheet')

        script.
            var initToken = JSON.parse(!{JSON.stringify(zzishapi)});    
            var publicConfig = !{JSON.stringify(publicConfig)}

        script(src='/js/vendor.js')
        script(src='/lib/angular.min.js')
        script(src='/lib/angular-animate.min.js')
        script(src='/lib/angular-route.min.js')
        script(src='/lib/jquery-1.11.0.js')
        script(src='/lib/uuid.js')
        script(src='/lib/zzish.js')
        script(src='https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML')
        script(src='/js/quiz.js')
        script(src='/lib/bootstrap.js')
        script(src='/js/quizApp.js')
        script(src='/outdatedbrowser/outdatedbrowser.min.js')
        script.
            (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
            (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
            m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
            })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

            ga('create', 'UA-2402555-24', 'auto');
            ga('send', 'pageview');
            $( document ).ready(function() {
                outdatedBrowser({
                    bgColor: '#f25648',
                    color: '#ffffff',
                    lowerThan: 'transform',
                    languagePath: '/outdatedbrowser/lang/en.html'
                })
            })
            
        link(href='/css/cq-bootstrap.min.css', rel='stylesheet')
        link(href='/css/quizalize.css', rel='stylesheet')
        link(href='//fonts.googleapis.com/css?family=Source+Code+Pro:500', rel='stylesheet', type='text/css')
        script(src="//cdnjs.cloudflare.com/ajax/libs/KaTeX/0.3.0/katex.min.js")
        link(href='//cdnjs.cloudflare.com/ajax/libs/KaTeX/0.3.0/katex.min.css', rel='stylesheet')
        <!-- Hotjar Tracking Code for www.quizalize.com -->
        script.
            
            (function(h,o,t,j,a,r){
                h.hj=h.hj||function(){(h.hj.q=h.hj.q||[]).push(arguments)};
                h._hjSettings={hjid:60604,hjsv:5};
                a=o.getElementsByTagName('head')[0];
                r=o.createElement('script');r.async=1;
                r.src=t+h._hjSettings.hjid+j+h._hjSettings.hjsv;
                a.appendChild(r);
            })(window,document,'//static.hotjar.com/c/hotjar-','.js?sv=');
        


        style.
            .quiz-find-title {
                margin-bottom: 40px;
            }
            .container.ng-enter {
                -webkit-transition: .3s ease-out all; /* Safari/Chrome */
                -moz-transition: .3s ease-out all; /* Firefox */
                -o-transition: .3s ease-out all; /* Opera */
                transition: .3s ease-out all; /* IE10+ and Future Browsers */
            }

            .container.ng-enter {
                opacity: 0;
            }

            .container.ng-enter.ng-enter-active {
                opacity: 1;
            }

            .container.ng-leave {
                -webkit-transition: .3s ease-out all; /* Safari/Chrome */
                -moz-transition: .3s ease-out all; /* Firefox */
                -o-transition: .3s ease-out all; /* Opera */
                transition: .3s ease-out all; /* IE10+ and Future Browsers */
            }

            .container.ng-leave {
                opacity: 1;
            }

            .container.ng-leave.ng-leave-active {
                opacity: 0;
            }

            @media (orientation:portrait) {
                .bg-art {
                    background: url('/img/classQuizzBG.jpg') no-repeat;
                    background-size: cover;
                    height: 35vh;
                }

                @media(max-height: 320px) {
                .bg-art {
                    height: 15vh;
                }
                }

                @media(max-height: 560px) {
                    .bg-art {
                        height: 25vh;
                    }
                }

                @media(min-height: 720px) {
                    .bg-art {
                        height: 40vh;
                    }
                }

                @media(min-height: 720px) {
                    .bg-art {
                        height: 50vh;
                    }
                }

                @media(min-width: 960px){
                    .bg-art {
                        height: 80vh;
                    }
                }
            }

            @media (orientation:landscape) {
                .bg-art {
                    background: url('/img/classQuizzBGWide.jpg') no-repeat;
                    background-size: cover;
                    height: 40vh;
                }
            }

            @media (orientation:landscape) and (max-width:767px) {
                .bg-art {
                    background: url('/img/classQuizzBGWider.jpg') no-repeat;
                    background-size: cover;
                    padding-top:60px;
                }
            }



            .letterTile {
                font-family: 'Source Code Pro', monospace;
                font-weight: 500;
            }

            @media (max-width: 767px) {
                .letterTile {
                    padding: 5px 10px;
                    font-size: 12px;
                    line-height: 1.5;
                    border-radius: 3px;
                }
            }

            body{
                padding-top:60px;
            }

            .quizQuestion {
                font-size: 150%;
                font-weight: 700;
            }

            @media (min-width: 768px) {
                .quizQuestion {

                }
            }
    body
        button.btn.btn-primary.btn-lg(data-toggle="modal",data-target="#myModal",style="display:none")#messageButton

        div.modal.fade(tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true",ng-controller="NavBarController as nctrl")#myModal
            div.modal-dialog
                div.modal-content
                    div.modal-header
                        input(type="hidden",value="")#modalUuid
                        button.close(data-dismiss="modal" aria-label="Close")
                            span(aria-hidden="true") &times;
                        h4.modal-title#modalTitle
                    div.modal-body
                        p#modalMessage
                    div.modal-footer
                        button.btn.btn-default(data-dismiss="modal")#closeButton Close
                        button.btn.btn-primary#confirmButton(data-dismiss="modal", ng-click="nctrl.confirmed()") OK
        div(ng-view)
        
